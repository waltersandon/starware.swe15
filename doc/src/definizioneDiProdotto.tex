\documentclass[12pt,a4paper]{article}
\input{../style/stile.sty}
\input{../tex/glossario.tex}

%Titolo documento
\newcommand{\titoloDocumento}{Definizione di prodotto}

%Prima data di creazione del documento
\newcommand{\dataCreazione}{01 Marzo 2016}

%Inserite la versione attuale del documento
\newcommand{\versione}{0.0.5}

%Stato in cui si trova il documento: Formale solo all'atto di consegna
\newcommand{\stato}{Informale}

%Uso del documento
\newcommand{\uso}{Esterno}

\rhead{\titoloDocumento}
\lfoot{Versione: \versione}
\title{\titoloDocumento}

\begin{document}
\begin{titlepage}
	\begin{center}
		\intestazione{\titoloDocumento}
		
		\begin{table}[h]
			\begin{center}
				\begin{tabular}{r | l}
					\multicolumn{2}{c}{\textbf{Informazioni sul documento}}\\
					\midrule
					\textbf{Nome Documento} & \titoloDocumento \\
					\textbf{Versione} & \versione \\
					\textbf{Stato} & \emph{\stato} \\
					\textbf{Uso} & \emph{\uso} \\
					\textbf{Data Creazione} & \dataCreazione \\
					\textbf{Data Ultima Modifica} & \today \\
					\textbf{Redazione} & \AB\\
					\  & \TP\\
					\  &  \WS\\
					\  &  \AVE\\
					\textbf{Verifica} &  \IB\\
					\ & \AVI \\
                    \textbf{Approvazione} &  \TP{}\\
					\textbf{Lista Distribuzione} & \nomeGruppo \\
					\  & \Vardanega \\
					\  & \Cardin \\
					\  & Il proponente \Zucchetti \\
					
				\end{tabular}
			\end{center}
		\end{table}
		
	\end{center}
\end{titlepage}
\newpage

\Large{\textbf{Registro delle modifiche}}\\
\normalsize

\begin{center}
	\begin{longtable}[H]{p{0.12\textwidth} p{0.2\textwidth} p{0.18\textwidth} p{0.39\textwidth}}
		\toprule
		\textbf{Versione}	&	\textbf{Autore}	&	\textbf{Data}	&	\textbf{Descrizione}\\*
		\midrule
        \midrule
        0.0.5 & \TP{} & 2016-03-15 & Definizione struttura del documento e aggiunta
            degli standard di progetto \\*
		\midrule
		0.0.4 & \AVE{} & 2016-03-12 & Aggiunta descrizioni tecnologie HTML5, CSS3, Javascript, 
            Express, Bootstrap e Angular \\*
		\midrule
		0.0.3 & \AVE{} & 2016-03-09 & Aggiunte descrizioni tecnoglogie Node.js, NoSQL, Mongoose, MongoDB \\*
		\midrule
		0.0.2 & \AVI{} & 2016-03-05 &  Aggiunta descrizioni tabella REST API \\*
		\midrule
		0.0.1 & \NDC{} & 2016-03-01 &  Creazione tabella REST API \\*
		\midrule
		0.0.0 & \NDC{} & 2016-03-01 &  Creazione documento \\*
		\bottomrule
		\caption{Versionamento del documento}
		\label{tabVers1} 
	\end{longtable}
\end{center}

\newpage
\tableofcontents
\newpage
\listoftables
\listoffigures
\newpage

\section{Introduzione}	\label{intro}
\subsection{Scopo}
Lo scopo di questo documento è di definire nel dettaglio l'architettura del sistema sviluppato, fornendo
una struttura completa ai programmatori per l'attività di codifica.

\subsection{Descrizione}
Il documento presenterà le tecnologie e gli standard scelti per il sviluppo del software. Verranno inoltre specificati
nel dettaglio i \mgls{package} e le classi che verranno poi codificati. Successivamente verrano specificati i diagrammi
di sequenza delle operazioni principali fornite dall'applicazione. E infine verrà specifica l'interfaccia REST.

\subsection{Descrizione Prodotto}
\descrizioneProdotto

\subsection{Glossario}
\glossarioPrint

\subsection{Riferimenti}

\subsubsection{Normativi}
\begin{itemize}
    \item \NdP{}: \textit{NormeDiProgetto\_v2.0.0};
    \item \AdR{}: \textit{AnalisiDeiRequisiti\_v2.0.0};
\end{itemize}

\subsubsection{Informativi}
\begin{itemize}
    \item \textbf{Specifica HTML5} \url{https://www.w3.org/TR/html5/};
    \item \textbf{Specifica CSS3} \url{https://www.w3.org/TR/css3-roadmap/};
    \item \textbf{Documentazione Node.js} \url{https://nodejs.org/en/docs/};
    \item \textbf{Documentazione Express} \url{http://expressjs.com/en/guide/routing.html};
    \item \textbf{Documentazione MongoDB} \url{https://docs.mongodb.org/manual/?_ga=1.2705776.192504053.1456951655};
    \item \textbf{Documentazione Mongoose} \url{http://mongoosejs.com/docs/guide.html};
    \item \textbf{Documentazione Angularjs} \url{https://docs.angularjs.org/api};
    \item \textbf{Documentazione Bootstrap} \url{http://getbootstrap.com/css/}.
\end{itemize}

\newpage

\section{Tecnologie}\label{tecnologie}
In questa sezione verranno descritte le tecnologie che il gruppo ha deciso di utilizzare per lo sviluppo dell'applicazione \prjL{}, alcune delle quali sono state consigliate dal \mgls{proponente}.


\subsection{Linguaggi}
\subsubsection{HTML5}\label{html}
L’\mgls{html5} è un linguaggio di \mgls{markup} per strutturare pagine web. Verrà utilizzato per la realizzazione dell’interfaccia grafica Web dell’applicativo. \mgls{html5} è diventato standard \mgls{w3c} nell’ottobre 2014 ed è ben supportato dai \mgls{browser} moderni.
I vantaggi principali del linguaggio sono:
\begin{itemize}
	\item permette di definire in maniera semplice la struttura delle pagine web;
	\item permette una maggiore semantica della pagina web, garantendo così una migliore indicizzazione da parte dei motori di ricerca.
\end{itemize}

\subsubsection{CSS3}\label{css}
CSS3 (Cascading Style Sheets) è il linguaggio che verrà utilizzato per l’aspetto grafico delle pagine web per l'applicazione qualora non bastassero i costrutti forniti dal
\mgls{framework} Bootstrap \ref{bootsrap}.

\subsubsection{JavaScript}\label{javascript}
\mgls{javascript} è un linguaggio di \mgls{scripting} interpretato che consente ai \mgls{browser} di eseguire codice rendendo le pagine web dinamiche. Consente di realizzare prodotti \mgls{software} che eseguono sfruttandoo le capacità di calcolo fornite dai \mgls{browser} degli utenti e quindi, che non necessitano dell’intervento di elaborazione del \mgls{server}. \mgls{javascript} tuttavia introduce anche degli aspetti critici a cui il gruppo dovrà prestare particolare attenzione: come la mancanza di tipizzazione del linguaggio, che potrebbe indurre a commettere errori nel codice e rendere più difficile, oppure gli eventuali problemi di sicurezza per l'utente nel caso venisse eseguito del codice malevolo.
la progettazione dei test.
I principali motivi della scelta di questo linguaggio sono:
\begin{itemize}
	\item Velocità di risposta dell’applicazione complessivamente migliore, a causa dell’esecuzione locale;
	\item Possibilità di rendere dinamiche le pagine web e di estenderne le funzionalità;
	\item Permette di reagire ad eventi generati dall’interazione tra l’utente e la pagina.
\end{itemize}
\mgls{javascript} verrà impiegato per tutte le funzionalità legate allo standard \mgls{html5} che non sono direttamente accessibili dal \mgls{framework} \mgls{angularjs}.

\TODO{da definire se bisogna aggiungere altri ambiti}


\subsubsection{NoSql}\label{nosql}
I \mgls{database} \mgls{nosql} nascono con l'idea di superare delle limitazioni implicite nei database \mgls{sql} e sono caratterizzati dal essere non relazionali, distribuiti, \mgls{open-source} e scalabili orizzontalmente.
Molto frequentemente altre caratteristiche applicabili a questa tipologia di database sono: l'essere \mgls{schema-free} l'avere \mgls{API} semplici e la possibilità di avere una quantità di dati enormi al loro interno.
Le sopracitate caratteristiche e la possibilità di cimentarsi con una tecnologia nuova per il gruppo hanno ci hanno indirizzato verso la scelta di questo tipo di database.


\subsection{Frameworks}
\subsubsection{Node.js}\label{node.js}

\mgls{Node.js} è un \mgls{framework} \mgls{open-source} per lo sviluppo di applicazioni Web server-side.
Anche se \mgls{Node.js} non è un \mgls{framework} \mgls{Javascript} molti dei suoi moduli base  sono scritti in \mgls{Javascript}, e gli sviluppatori possono facilmente scriverne di nuovi.
\mgls{Node.js} ha un architettura di tipo \mgls{event-driven} capace di chiamate \mgls{I/O} asincrone, il che lo rende particolarmente adatto per lo sviluppo di server Web.
Queste scelte di design nel linguaggio di ottimizzare la capacità e la scalabilità delle applicazioni Web con molte operazioni di \mgls{I/O}.
Le principali caratteristiche che hanno fatto propendere il gruppo per \mgls{Node.js} sono quindi:
\begin{itemize}
	\item \textbf{Approccio asincrono:} in quanto permette di accedere alle risorse del sistema operativo in modalità \mgls{event-driven} e non sfruttando il classico modello basato su processi o \mgls{thread} concorrenti utilizzato dai classici web server. Ciò garantisce una maggiore efficienza in termini di prestazioni, poiché durante le attese il runtime può gestire qualcos’altro in maniera asincrona
	
	\item \textbf{Architettura modulare:} lavorando con \mgls{Node.js} è molto facile organizzare il lavoro in librerie, importare i \mgls{moduli} e combinarli fra loro. Questo è reso molto comodo attraverso il \mgls{node package manager} (npm) attraverso il quale lo sviluppatore può contribuire e
	accedere ai \mgls{package} messi a disposizione dalla community.
	Le applicazioni \mgls{Node.js} vengono eseguite su un singolo \mgls{thread}, sebbene \mgls{Node.js} utilizzi un modello \mgls{multi-thread} per la gestione degli eventi legati a file e connessioni di rete
\end{itemize}

\subsubsection{AngularJS}\label{angularjs}
\mgls{angularjs} è un \mgls{framework} \mgls{javascript} \mgls{open-source}  inspirato al pattern \mgls{mvc} patrocinato da \mgls{Google}.
Uno dei vantaggi più grandi che caratterizzano questo \mgls{framework} è la possibilità di integrare e
utilizzare molte funzioni utilizzando quasi esclusivamente l’\mgls{html} grazie all’approccio dichiarativo, permettendo di estenderne la sintassi per esprimere le componenti dell’applicazione in maniera chiara e succinta.
Le caratteristiche principali che caratterizzano questo \mgls{framework} sono:
\begin{itemize}
	\item \textbf{Data Binding:} è un’ approccio automatico per aggiornare la \mgls{vista} ogni qualvolta il \mgls{model} cambia e viceversa. Aiuta lo sviluppo eliminando la manipolazione del \mgls{dom} allo sviluppatore
	\item \textbf{Dependency injection:} permette di descrivere in maniera dichiarativa quali sono le
	dipendenze che l’applicazione possiede, isolando i comportamenti e le responsabilità dei componenti garantendo un facile rimpiazzo di quest’ultimi. Questo meccanismo favorisce inoltre la testabilità del codice dell’applicazione	
\end{itemize}
\mgls{angularjs} verrà impiegato sia per la creazione dell’interfaccia grafica sia per la parte algoritmica del \mgls{front-end}.



\subsubsection{Bootstrap}\label{bootstrap}
Bootstrap è un insieme di elementi grafici, scritti in \mgls{javascript} e \mgls{css3}, che viene utilizzato per dare all'applicazione una grafica moderna e \mgls{responsive}.
Bootstrap è stato scelto in quanto risponde a molte esigenze del gruppo:
\begin{itemize}
	\item Permette all’applicativo di essere responsive G applicando facilmente delle regole già pronte;
	\item Le diverse componenti vengono già incorporate direttamente nel \mgls{framework} \mgls{angularjs};
	\item Presenza di una vasta comunità a supporto;
	\item Permette di gestire in modo automatico il \mgls{rendering} delle pagine dell'applicazione per svariati dispositivi (smartphone, tablet, Pc).
\end{itemize}


\subsubsection{Express}\label{express}
application framework to help organize your web application into an MVC architecture on the server side

Express è un \mgls{framework} minimale che aiuta ad organizzale le applicazioni web create con \mgls{Node.js} secondo l'architettura \mgls{mvc} sul lato server. Express integra \mgls{Node.js}, fornendo una migliore implementazione del sistema di \mgls{routing}, incrementando le funzioni di richiesta e risposta estendendole per una maggior flessibilità, integrando nuovi \mgls{middleware}, ed agevolando la realizzazione delle \mglspl{vista}.
Express aiuta l'utente a gestire le \mgls{route}, le \mgls{request} e le \mgls{view}.


\subsection{Librerie}\label{librery}
\subsubsection{Mongoose}\label{mongoose}
Per questo progetto è stato scelto di utilizzare \mgls{Mongoose}, attualmente il più diffuso \mgls{odm}. Questa libreria permette di definire degli schemi per modellare i dati del database, imponendo una certa struttura per la creazione di nuovi \mgls{Document}. Inoltre, fornisce molti strumenti utili per la validazione dei dati, per la definizione di \mgls{query} e per il cast dei tipi predefiniti.
La documentazione di \mgls{Mongoose} è ben fornita e descrive le \mgls{API} in maniera esaustiva, fornendo degli \mgls{snippet} del codice sorgente.


\subsection{Database}
\subsubsection{MongoDB}\label{mongodb}
%copiata dagli stakeholders
\mgls{MongoDB} è un database \mgls{nosql} \mgls{open-source} scalabile e altamente performante di tipo \mgls{document-oriented}, in cui i dati sono archiviati sotto forma di documenti in stile \mgls{JSON} con
schemi dinamici che \mgls{MongoDB} chiama \mgls{BSON}, secondo una struttura semplice e potente.
I principali vantaggi derivati dal suo utilizzo sono:
\begin{itemize}
	\item \textbf{Alte performance:} non ci sono \mgls{join} che possono rallentare le operazioni di lettura o scrittura. L’indicizzazione include gli indici di chiave anche sui documenti innestati e sugli array, permettendo una rapida interrogazione al database
	\item \textbf{Affidabilità:} alto meccanismo di replicazione su server
	\item \textbf{Schemaless:} non esiste nessuno \mgls{schema}, è più flessibile e può essere facilmente trasposto in un modello ad oggetti
	\item Permette di processare parallelamente i dati (\mgls{Map-Reduce})
	\item Tipi di dato più flessibili
\end{itemize}
Altre funzionalità comprendono la possibilità di creare delle \mgls{query} ad hoc, l’Auto-Sharding, ovvero la capacità di scalare orizzontalmente e di aggiungere nuove macchine al database operativo.
Inoltre, \mgls{MongoDB} supporta la definizione di collection con una dimensione fissata. Questo particolare tipo di collection mantiene l’ordine di inserimento e, una volta raggiunta la dimensione massima prefissata, si comporta come una lista circolare.

\newpage
\section{Standard di progetto}

% Ciò che segue è da aggiungere nel periodo di codifica
% \subsection{Documentazione del codice}
% Gli standard relativi alla documentazione del codice sono specificati 
% nelle \textit{\NdP\_v3.0.0}.

% Ciò che segue è da aggiungere nel periodo di codifica
% \subsection{Documentazione del codice}
% Gli standard relativi alla documentazione del codice sono specificati 
% nelle \textit{\NdP\_v3.0.0}.

\subsection{Denominazione di entità e relazioni}
Entità e relazioni devono avere nomi chiari e concisi. È preferibile utilizzare sostantivi
per le entità e verbi per le relazioni. Per ulteriori informazioni si vedano
le \textit{\NdP\_v2.0.0}.

\subsection{Strumenti di lavoro}
Gli strumenti da adottare e le procedure da seguire per utilizzarli correttamente durante la realizzazione 
del prodotto software sono definiti nelle \textit{\NdP\_v2.0.0}.

\newpage
\section{Specifica componenti}

\subsection{Back-end}

\subsubsection{Interfaccia REST}

\begin{center}
	\begin{longtable}[H]{p{0.3\textwidth} p{0.12\textwidth} p{0.18\textwidth} p{0.29\textwidth}}
		\toprule
		\textbf{URI} & \textbf{Metodo} & \textbf{Attore} & \textbf{Descrizione}\\*
		\midrule
		\texttt{/profile} & \textbf{GET} & Utente & Restituisce i dati relativi all'utente \\*
		\midrule
		\texttt{/profile} & \textbf{POST} & Ospite & Login, crea una nuova sessione associata all'utente \\*
		\midrule
		\texttt{/profile} & \textbf{PUT} & Utente & Modifica i dati dell'utente \\*
		\midrule
		\texttt{/profile} & \textbf{DELETE} & Utente & Logout, elimina la sessione dell'utente \\*
		\midrule
		\texttt{/profile/invite} & \textbf{POST} & Amministratore & Invia una mail di invito a registrazione ad un docente \\*
		\midrule
		\texttt{/profile/invite} & \textbf{POST} & Proprietario & Invia una mail di invito a registrazione ad un amministratore \\*
		\midrule
		\texttt{/profile/forgotten} & \textbf{POST} & Ospite & Crea una richiesta di recupero password \\*
		
		\midrule
		\midrule
		\texttt{/questionnaire} & \textbf{GET} & Studente & Restituisce uno specifico questionario da eseguire \\*
		\midrule
		\texttt{/questionnaire} & \textbf{GET} & Docente & Restituisce uno specifico questionario completo\\*
		\midrule
		\texttt{/questionnaire} & \textbf{POST} & Studente & Salva le risposte sul server e restituisce i risultati \\*
		\midrule
		\texttt{/questionnaire} & \textbf{POST} & Docente & Crea un nuovo questionario \\*
		\midrule
		\texttt{/questionnaire} & \textbf{PUT} & Docente & Modifica un questionario \\*
		\midrule
		\texttt{/questionnaire} & \textbf{DELETE} & Docente & Elimina un questionario \\*
		
		\midrule
		\midrule
		\texttt{/question} & \textbf{GET} & Studente & Restituisce una domanda da eseguire \\*
		\midrule
		\texttt{/question} & \textbf{GET} & Docente & Restituisce una domanda completa \\*
		\midrule
		\texttt{/question} & \textbf{POST} & Studente & Salva la risposta sul server e restituisce il risultato \\*
		\midrule
		\texttt{/question} & \textbf{POST} & Docente & Crea una nuova domanda \\*
		\midrule
		\texttt{/question} & \textbf{PUT} & Docente & Modifica una domanda \\*
		\midrule
		\texttt{/question} & \textbf{DELETE} & Docente & Elimina una domanda \\*
		
		\midrule
		\midrule
		\texttt{/subject} & \textbf{GET} & Studente & Restituisce la lista degli argomenti \\*
		\midrule
		\texttt{/subject} & \textbf{GET} & Docente & Restituisce la lista degli argomenti \\*
		\midrule
		\texttt{/subject} & \textbf{POST} & Docente & Crea un nuovo argomento \\*
		\midrule
		\texttt{/subject} & \textbf{PUT} & Docente & Modifica un argomento \\*
		\midrule
		\texttt{/subject} & \textbf{DELETE} & Docente & Elimina un argomento \\*
		
		%\midrule
		%\midrule
		%\texttt{/class} & \textbf{GET} & Studente & Restituisce le informazioni di una classe \\*
		%\midrule
		%\texttt{/class} & \textbf{GET} & Docente & Restituisce le informazioni di una classe \\*
		%\midrule
		%\texttt{/class} & \textbf{POST} & Studente & Iscrive lo studente alla classe \\*
		%\midrule
		%\texttt{/class} & \textbf{POST} & Docente & Crea una nuova classe \\*
		%\midrule
		%\texttt{/class} & \textbf{PUT} & Docente & Modifica una classe \\*
		%\midrule
		%\texttt{/class} & \textbf{DELETE} & Studente & Cancella l'iscrizione dello studente alla classe \\*
		%\midrule
		%\texttt{/class} & \textbf{DELETE} & Docente & Elimina una classe \\*
		
		\midrule
		\midrule
		\texttt{/result/question} & \textbf{GET} & Studente & Restituisce le vecchie risposte e le statistiche di una domanda \\*
		\midrule
		\texttt{/result/question} & \textbf{GET} & Docente & Restituisce tutte le risposte e le statistiche di una domanda \\*
		\midrule
		\texttt{/result/questionnaire} & \textbf{GET} & Studente & Restituisce le vecchie risposte e le statistiche di un questionario \\*
		\midrule
		\texttt{/result/questionnaire} & \textbf{GET} & Docente & Restituisce tutte le risposte e le statistiche di un questionario \\*
		%\midrule
		%\texttt{/result/class} & \textbf{GET} & Docente & restituisce le risposte e le statistiche di una classe \\*
		
		\midrule
		\midrule
		\texttt{/user} & \textbf{GET} & Amministratore & Restituisce la lista di Docenti e Studenti \\*
		\midrule
		\texttt{/user} & \textbf{GET} & Proprietario & Restituisce la lista di amministratori\\*
		\midrule
		\texttt{/user} & \textbf{DELETE} & Amministratore & Elimina un utente di tipo Studente o Docente \\*
		\midrule
		\texttt{/user} & \textbf{DELETE} & Proprietario & Elimina un amministratore \\*
		
		\bottomrule
		\caption{Interfaccia REST}
		\label{tab:intrest}
	\end{longtable}
\end{center}

\newpage
\section{Diagrammi di sequenza}

\end{document} 
